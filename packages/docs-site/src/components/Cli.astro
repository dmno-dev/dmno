---
import json from "@/utils/cli.json";
import { Code } from "@astrojs/starlight/components";

const commands = json;

export const formatExamples = (ex: string[][]) => {
  let str = "";
  ex.map((e: string[]) => {
    e.map((i) => {
      str = str.concat(i);
    });
    str = str.concat("\n\n");
  });
  return str;
};
---

{
  commands.map((command) => {
    return (
      <>
        <div>
          <h2>{command.path}</h2>
          <p>
            <i>{command.description}</i>
          </p>
          <Code code={command.usage} />
          <!-- TODO PARSE MD HERE -->
          <p>{command.details}</p>
          {command.examples && (
            <Code
              code={formatExamples(command.examples)}
              lang="bash"
              title="Examples"
            />
          )}
        </div>
        <hr />
      </>
    );
  })
}
